{% extends "base.html" %}

{% load crispy_forms_tags %}

{% block content %}

<div class="jumbotron home-1 text-center mb-4">
    <h1 class="display-4"><strong>My Profile</strong></h1>
</div>
<!-- Current Details -->
<div class="row justify-content-center">
    <div class="col-12 col-sm-8 fw-bold mx-4 my-4 text-center">
        <h2>Current Details</h2>
        <!-- Small displays upwards -->
        <table
            class="table table-striped table-hover w-50 table-bordered table-responsive my-4 profile-table mx-auto d-none d-sm-block">
            <th scope="col" class="w-30">Info Type:</th>
            <th scope="col" class="current-details">Current:</th>
            <tr>
                <td><strong>First Name: </strong></td>
                <td>{{ first_name }}</td>
            </tr>
            <tr>
                <td><strong>Last Name: </strong></td>
                <td>{{ last_name }}</td>
            </tr>
            <tr>
                <td><strong>Email: </strong></td>
                <td>{{ email }}</td>
            </tr>
            <tr>
                <td><strong>Phone Number: </strong></td>
                <td>{{ phone_number }}</td>
            </tr>
            <tr>
                <td><strong>Address 1: </strong></td>
                <td>{{ address_1 }}</td>
            </tr>
            <tr>
                <td><strong>Address 2: </strong></td>
                <td>{{ address_2 }}</td>
            </tr>
            <tr>
                <td><strong>City: </strong></td>
                <td>{{ city }}</td>
            </tr>
            <tr>
                <td><strong>Postcode: </strong></td>
                <td>{{ postcode }}</td>
            </tr>
            <tr>
                <td><strong>County: </strong></td>
                <td>{{ county }}</td>
            </tr>
            <tr>
                <td><strong>Country: </strong></td>
                <td>{{ country }}</td>
            </tr>
        </table>
        <!-- Mobile-friendly display -->
        <div class="d-block d-sm-none my-4">
            <strong>First Name: </strong> {{ first_name }}<br>
            <strong>Last Name: </strong> {{ last_name }}<br>
            <strong>Email: </strong> {{ email }}<br>
            <strong>Phone Number: </strong> {{ phone_number }}<br>
            <strong>Address 1: </strong> {{ address_1 }}<br>
            <strong>Address 2: </strong> {{ address_2 }}<br>
            <strong>City: </strong> {{ city }}<br>
            <strong>Postcode: </strong> {{ postcode }}<br>
            <strong>County: </strong> {{ county }}<br>
            <strong>Country: </strong> {{ country }}<br>
        </div>
        <a href="edit/{{ user }}"><button class="my-1 positive-button-lg">Update my Details</button></a>
    </div>
    <!-- Order History -->
    <div class="col-12 col-sm-8 fw-bold text-center">
        <h2>Order History</h2>
        {% if orders %}
        <!-- Small displays updwards -->
        <table
            class="table table-striped table-hover w-auto table-bordered my-4 table-responsive profile-table d-none d-sm-block">
            <tr>
                <th scope="col" class="w-25">Order Number:</th>
                <th scope="col" class="w-25">Order Date:</th>
                <th scope="col" colspan=2>Total:</th>
            </tr>
            {% for order in orders %}
            <tr>
                <td scope="row">{{ order.order_number }}</td>
                <td> {{ order.date }} </td>
                <td>£{{ order.order_total }} </td>
                <td><a href="order/{{ order.id }}"><button class="update-button positive-button">Order
                            Details</button></a>
            </tr>
            {% endfor %}
        </table>
        {% for order in orders %}
        <!-- Mobile-friendly display -->
        <div class="d-flex d-sm-none text-center my-4 justify-content-center">
            <ul class="profile-list">
                <li class="mx-auto"><strong class="my-2">Order Number:</strong></li>
                <li class="mx-auto order-number"> {{ order.order_number }}</li>
                <li class="mx-auto"><strong class="my-2">Order Date:</strong> {{ order.date }}</li>
                <li class="mx-auto"><strong class="my-2">Total:</strong> £{{ order.order_total }}</li>
                <li class="mx-auto"><a href="order/{{ order.id }}"><button class="update-button positive-button">Order Details</button></a></li>
            </ul> 
        </div>
        <hr class="hr-1 d-sm-none">
        {% endfor %}
        {% else %}
        <div>
            Uh oh- no orders yet...
        </div>
        {% endif %}
    </div>
</div>


{% endblock %}